<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Smart Community Hub</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        .hero {
            background-color: #f8f9fa;
            padding: 4rem 0;
            margin-bottom: 2rem;
        }
        .feature-icon {
            font-size: 2.5rem;
            margin-bottom: 1rem;
            color: #0d6efd;
        }
        .card {
            margin-bottom: 1.5rem;
            transition: transform 0.3s;
        }
        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0,0,0,0.1);
        }
        footer {
            margin-top: 3rem;
            padding: 2rem 0;
            background-color: #f8f9fa;
        }
    </style>
</head>
<body>
    <nav class="navbar navbar-expand-lg navbar-dark bg-primary">
        <div class="container">
            <a class="navbar-brand" href="#">Smart Community Hub</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item">
                        <a class="nav-link active" href="#">Home</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#events">Events</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#services">Services</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#resources">Resources</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="/api/swagger/" target="_blank">API Docs</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link btn btn-outline-light ms-2" href="/admin/" target="_blank">Admin</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <section class="hero text-center">
        <div class="container">
            <h1 class="display-4">Welcome to Smart Community Hub</h1>
            <p class="lead">Connect with your community, discover local services, and share resources</p>
            <div class="d-flex justify-content-center gap-3 mt-4">
                <button class="btn btn-primary btn-lg" id="loginBtn">Log In</button>
                <button class="btn btn-outline-primary btn-lg" id="signupBtn">Sign Up</button>
            </div>
        </div>
    </section>

    <section class="container mb-5" id="features">
        <h2 class="text-center mb-4">Our Features</h2>
        <div class="row">
            <div class="col-md-4">
                <div class="text-center">
                    <div class="feature-icon">üìÖ</div>
                    <h3>Event Scheduling</h3>
                    <p>Discover and participate in community events, workshops, and gatherings.</p>
                </div>
            </div>
            <div class="col-md-4">
                <div class="text-center">
                    <div class="feature-icon">üõ†Ô∏è</div>
                    <h3>Service Directory</h3>
                    <p>Find local service providers like tutors, electricians, and more.</p>
                </div>
            </div>
            <div class="col-md-4">
                <div class="text-center">
                    <div class="feature-icon">üßæ</div>
                    <h3>Resource Booking</h3>
                    <p>Book shared resources like coworking spaces, tools, and equipment.</p>
                </div>
            </div>
        </div>
    </section>

    <section class="container mb-5" id="events">
        <h2 class="text-center mb-4">Upcoming Events</h2>
        <div class="row" id="events-container">
            <div class="col-12 text-center">
                <div class="spinner-border text-primary" role="status">
                    <span class="visually-hidden">Loading...</span>
                </div>
            </div>
        </div>
    </section>

    <section class="container mb-5" id="services">
        <h2 class="text-center mb-4">Local Service Providers</h2>
        <div class="row" id="services-container">
            <div class="col-12 text-center">
                <div class="spinner-border text-primary" role="status">
                    <span class="visually-hidden">Loading...</span>
                </div>
            </div>
        </div>
    </section>

    <section class="container mb-5" id="resources">
        <h2 class="text-center mb-4">Available Resources</h2>
        <div class="row" id="resources-container">
            <div class="col-12 text-center">
                <div class="spinner-border text-primary" role="status">
                    <span class="visually-hidden">Loading...</span>
                </div>
            </div>
        </div>
    </section>

    <footer class="text-center">
        <div class="container">
            <p>&copy; 2025 Smart Community Hub. All rights reserved.</p>
        </div>
    </footer>

    <!-- Login Modal -->
    <div class="modal fade" id="loginModal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Log In</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form id="loginForm">
                        <div class="mb-3">
                            <label for="username" class="form-label">Username</label>
                            <input type="text" class="form-control" id="username" required>
                        </div>
                        <div class="mb-3">
                            <label for="password" class="form-label">Password</label>
                            <input type="password" class="form-control" id="password" required>
                        </div>
                        <button type="submit" class="btn btn-primary w-100">Log In</button>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <!-- Signup Modal -->
    <div class="modal fade" id="signupModal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Sign Up</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form id="signupForm">
                        <div class="mb-3">
                            <label for="newUsername" class="form-label">Username</label>
                            <input type="text" class="form-control" id="newUsername" required>
                        </div>
                        <div class="mb-3">
                            <label for="email" class="form-label">Email</label>
                            <input type="email" class="form-control" id="email" required>
                        </div>
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label for="firstName" class="form-label">First Name</label>
                                <input type="text" class="form-control" id="firstName">
                            </div>
                            <div class="col-md-6 mb-3">
                                <label for="lastName" class="form-label">Last Name</label>
                                <input type="text" class="form-control" id="lastName">
                            </div>
                        </div>
                        <div class="mb-3">
                            <label for="newPassword" class="form-label">Password</label>
                            <input type="password" class="form-control" id="newPassword" required>
                        </div>
                        <div class="mb-3">
                            <label for="confirmPassword" class="form-label">Confirm Password</label>
                            <input type="password" class="form-control" id="confirmPassword" required>
                        </div>
                        <button type="submit" class="btn btn-primary w-100">Sign Up</button>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // Base API URL
        const API_BASE_URL = '/api';
        let authToken = localStorage.getItem('authToken');
        
        // DOM Elements
        const loginBtn = document.getElementById('loginBtn');
        const signupBtn = document.getElementById('signupBtn');
        const loginForm = document.getElementById('loginForm');
        const signupForm = document.getElementById('signupForm');
        const eventsContainer = document.getElementById('events-container');
        const servicesContainer = document.getElementById('services-container');
        const resourcesContainer = document.getElementById('resources-container');
        
        // Bootstrap Modals
        const loginModal = new bootstrap.Modal(document.getElementById('loginModal'));
        const signupModal = new bootstrap.Modal(document.getElementById('signupModal'));
        
        // Event Listeners
        loginBtn.addEventListener('click', () => loginModal.show());
        signupBtn.addEventListener('click', () => signupModal.show());
        
        loginForm.addEventListener('submit', async (e) => {
            e.preventDefault();
            // In a real app, you would authenticate with the API here
            loginModal.hide();
            alert('Login functionality would be implemented with the real API');
        });
        
        signupForm.addEventListener('submit', async (e) => {
            e.preventDefault();
            // In a real app, you would register with the API here
            signupModal.hide();
            alert('Signup functionality would be implemented with the real API');
        });
        
        // Fetch and display events
        async function fetchEvents() {
            try {
                // For demo purposes, we're showing placeholder data
                // In a real app, you would fetch from the API
                const mockEvents = [
                    {
                        title: 'Community Cleanup Day',
                        description: 'Join us for a day of cleaning up our neighborhood parks.',
                        location: 'Central Park',
                        start_date: '2025-05-15T09:00:00',
                        is_free: true
                    },
                    {
                        title: 'Coding Workshop',
                        description: 'Learn the basics of web development in this hands-on workshop.',
                        location: 'Community Center',
                        start_date: '2025-05-20T18:00:00',
                        is_free: false,
                        fee: '15.00'
                    },
                    {
                        title: 'Farmers Market',
                        description: 'Local farmers selling fresh produce and handmade goods.',
                        location: 'Main Street',
                        start_date: '2025-05-10T08:00:00',
                        is_free: true
                    }
                ];
                
                displayEvents(mockEvents);
            } catch (error) {
                console.error('Error fetching events:', error);
                eventsContainer.innerHTML = '<div class="col-12"><p class="text-center text-danger">Failed to load events</p></div>';
            }
        }
        
        function displayEvents(events) {
            eventsContainer.innerHTML = '';
            
            events.forEach(event => {
                const date = new Date(event.start_date);
                const formattedDate = date.toLocaleDateString('en-US', { 
                    weekday: 'short', 
                    month: 'short', 
                    day: 'numeric',
                    hour: '2-digit',
                    minute: '2-digit'
                });
                
                const eventCard = document.createElement('div');
                eventCard.className = 'col-md-4';
                eventCard.innerHTML = `
                    <div class="card h-100">
                        <div class="card-body">
                            <h5 class="card-title">${event.title}</h5>
                            <h6 class="card-subtitle mb-2 text-muted">${formattedDate} at ${event.location}</h6>
                            <p class="card-text">${event.description}</p>
                            <p class="card-text">
                                ${event.is_free ? 
                                    '<span class="badge bg-success">Free</span>' : 
                                    `<span class="badge bg-primary">$${event.fee}</span>`}
                            </p>
                        </div>
                        <div class="card-footer">
                            <button class="btn btn-sm btn-outline-primary">Register</button>
                        </div>
                    </div>
                `;
                eventsContainer.appendChild(eventCard);
            });
        }
        
        // Fetch and display service providers
        async function fetchServiceProviders() {
            try {
                // For demo purposes, we're showing placeholder data
                const mockProviders = [
                    {
                        business_name: 'Quick Fix Plumbing',
                        service_type: 'Plumbing',
                        description: 'Professional plumbing services for all your needs.',
                        hourly_rate: '45.00'
                    },
                    {
                        business_name: 'Tech Tutors',
                        service_type: 'Education',
                        description: 'Computer and technology lessons for all ages.',
                        hourly_rate: '30.00'
                    },
                    {
                        business_name: 'Green Thumb Landscaping',
                        service_type: 'Gardening',
                        description: 'Professional landscaping and garden maintenance.',
                        hourly_rate: '35.00'
                    }
                ];
                
                displayServiceProviders(mockProviders);
            } catch (error) {
                console.error('Error fetching service providers:', error);
                servicesContainer.innerHTML = '<div class="col-12"><p class="text-center text-danger">Failed to load service providers</p></div>';
            }
        }
        
        function displayServiceProviders(providers) {
            servicesContainer.innerHTML = '';
            
            providers.forEach(provider => {
                const providerCard = document.createElement('div');
                providerCard.className = 'col-md-4';
                providerCard.innerHTML = `
                    <div class="card h-100">
                        <div class="card-body">
                            <h5 class="card-title">${provider.business_name}</h5>
                            <h6 class="card-subtitle mb-2 text-muted">${provider.service_type}</h6>
                            <p class="card-text">${provider.description}</p>
                            <p class="card-text">
                                <strong>Rate:</strong> $${provider.hourly_rate}/hour
                            </p>
                        </div>
                        <div class="card-footer">
                            <button class="btn btn-sm btn-outline-primary">Contact</button>
                            <button class="btn btn-sm btn-outline-secondary">Reviews</button>
                        </div>
                    </div>
                `;
                servicesContainer.appendChild(providerCard);
            });
        }
        
        // Fetch and display resources
        async function fetchResources() {
            try {
                // For demo purposes, we're showing placeholder data
                const mockResources = [
                    {
                        name: 'Community Center Meeting Room',
                        category: 'Space',
                        description: 'Large meeting room with projector and seating for 30 people.',
                        location: 'Community Center',
                        hourly_rate: '25.00'
                    },
                    {
                        name: 'Professional Power Tools Set',
                        category: 'Tools',
                        description: 'Complete set of power tools for home improvement projects.',
                        location: 'Tool Library',
                        hourly_rate: '15.00'
                    },
                    {
                        name: 'Electric Cargo Bike',
                        category: 'Transportation',
                        description: 'Environmentally friendly cargo bike for local transportation.',
                        location: 'Bike Share Station',
                        hourly_rate: '8.00'
                    }
                ];
                
                displayResources(mockResources);
            } catch (error) {
                console.error('Error fetching resources:', error);
                resourcesContainer.innerHTML = '<div class="col-12"><p class="text-center text-danger">Failed to load resources</p></div>';
            }
        }
        
        function displayResources(resources) {
            resourcesContainer.innerHTML = '';
            
            resources.forEach(resource => {
                const resourceCard = document.createElement('div');
                resourceCard.className = 'col-md-4';
                resourceCard.innerHTML = `
                    <div class="card h-100">
                        <div class="card-body">
                            <h5 class="card-title">${resource.name}</h5>
                            <h6 class="card-subtitle mb-2 text-muted">${resource.category}</h6>
                            <p class="card-text">${resource.description}</p>
                            <p class="card-text">
                                <strong>Location:</strong> ${resource.location}<br>
                                <strong>Rate:</strong> $${resource.hourly_rate}/hour
                            </p>
                        </div>
                        <div class="card-footer">
                            <button class="btn btn-sm btn-outline-primary">Book Now</button>
                        </div>
                    </div>
                `;
                resourcesContainer.appendChild(resourceCard);
            });
        }
        
        // Initialize the page
        document.addEventListener('DOMContentLoaded', () => {
            fetchEvents();
            fetchServiceProviders();
            fetchResources();
        });
    </script>
</body>
</html>
